<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>记录</title>
    <link rel="icon" type="image/x-icon" href="https://keepcodeing.github.io/InfectedZer-S/Img/icon.ico" />
    <style>
        *{
            padding: 0px;
            margin: 0px;
        }
        body{
            text-align: center;
        }
       
        .banner{
            height: 30px;
            width: 900px;
            background: black;
            text-align: center;
            display: inline-block;
        }
        a{
            color: gray;
            line-height: 30px;
            vertical-align: middle;
            font-family: "arial";
            cursor: pointer;
        }
        a:hover{
            color: white;
        }
        .message_list{
            display: block;
            width: 900px;
            background: darkblue;
            margin: 0 auto;
            list-style: none;
        }
        .list{
            width: 100%;
            background: #faffb3;
            position: relative;
            overflow: hidden;
            border-top: 1px solid black;
        }
        .div_box{
            text-align: start;
            width: 100%;
        }
        .msg{
            /*position: absolute;*/
            /*left: 10px;*/
            /*top: 5px;*/
            word-break: break-word;
            text-align:left;
            display: block;
            margin-top: 5px;
            margin-left: 10px;
            min-height: 50px;
            margin-bottom: 5px;
        }
        .toggle{
            position: absolute;
            right: 10px;
            /*top: 70%;*/
            cursor: pointer;
            overflow: hidden;
            bottom: 5px;
        }
        .time{
            /*position: absolute;*/
            /*left: 10px;*/
            /*top: 75%;*/
            font-size: 10px;
            color: gray;
            margin-left: 10px;
        }
        .dis_div{
            position: absolute;
            top: 0px;
            width: 100%;
            height: 100%;
            display: none;
            background: #a29c9b;
            line-height: 30px;
            vertical-align: middle;
            color: white;
            cursor: pointer;

        }
        .dis_div:hover{
            background: #d9ffee;
            color: black;
        }
    </style>
    <script>
        window.onload=function () {
            class MyQuery{
                constructor(){
                    this.id=undefined;
                    this.liHeight=undefined;
                    // this.MyStyle=undefined;
                }
                //通过ID获取元素
                GetId(id){
                    this.id=id;
                    this.el=document.getElementById(this.id);
                    return this;
                }
                //设置元素文本
                SetText(text){
                    this.text=text;
                    this.el.innerText=this.text;
                }
                //点击事件
                OnClick(fn){
                    this.click=fn;
                    if(this.el===null||this.el===undefined){
                        console.log("未选择元素");
                    }else{
                        this.el.onclick=this.click;
                    }
                }
                //通过Class获取元素
                ClassQ(cs,index){
                    let cas;
                    this.cs=cs;
                    cas=document.getElementsByClassName(this.cs);
                    this.el=cas[index];
                    return this;
                }
                //渐入动画（有BUG）
                FadeIn(time, speed){
                    let id=this.el;
                    let op;
                    let dis;
                    if(speed===null||undefined){
                        speed=0.1;
                    }
                    let timer=setInterval(function () {
                        op=parseInt(getComputedStyle(id).opacity);
                        dis=getComputedStyle(id).display;
                        // console.log(op);
                        if(dis==="none"){
                            id.style.display="block";
                        }
                        if(op===0){
                            op=1;
                        }
                        id.style.opacity=op+speed;
                        if(op+speed>=1){
                            clearInterval(timer);
                        }
                    },time);
                }
                //渐出动画
                FadeOut(time, speed){
                    let id=this.el;
                    let op;
                    let dis;
                    if(speed===null||undefined){
                        speed=0.1;
                    }
                    let timer=setInterval(function () {
                        op=parseInt(getComputedStyle(id).opacity);
                        dis=getComputedStyle(id).display;
                        if(dis==="none"){
                            id.style.display="block";
                            id.style.opacity="0";
                        }
                        id.style.opacity=op-speed;
                        if(op+speed<=0){
                            clearInterval(timer);
                        }
                    },time);
                }
                //上升动画
                Up(time, speed){
                    this.time=time;
                    let id=this.el;
                    let faterHeight;
                    let fater=id.parentNode.parentNode;
                    this.liHeight=parseInt(getComputedStyle(fater).height);
                    if(speed===null||undefined){
                        speed=10;
                    }
                    if(!isNaN(this.time)){
                        let timer=setInterval(function () {
                            id.style.display="none";
                            fater=id.parentNode.parentNode;
                            faterHeight=parseInt(getComputedStyle(fater).height);
                            fater.style.height=faterHeight-speed+"px";
                            if(faterHeight-speed<=30){
                                clearInterval(timer);
                            }
                        },this.time);
                    }else{
                        console.log("不是数字");
                    }
                }
                //设置元素背景
                SetBackG(info){
                    let img=info.MyUrl;
                    let BgStyle=info.MyStyle;
                    let id=this.el;
                    id[0].style.background=img+"no-repeat 0 0";
                    id[0].style.backgroundSize=BgStyle;
                }
                //通过tag获取元素
                GetTag(name){
                    this.el=document.getElementsByTagName(name);
                    return this;
                }
                //下滑动画
                Down(time, speed){
                    this.time=time;
                    let id=this.el;
                    let faterHeight;
                    let fater;
                    let liheight=this.liHeight;
                    if(speed===null||undefined){
                        speed=10;
                    }
                    if(!isNaN(this.time)){
                        let timer=setInterval(function () {
                            id.style.opacity="0";
                            id.style.display="none";
                            fater=id.parentNode;
                            faterHeight=parseInt(getComputedStyle(fater).height);
                            fater.style.height=faterHeight+speed+"px";
                            if(faterHeight+speed>=liheight){
                                clearInterval(timer);
                            }
                        },this.time);
                    }else{
                        console.log("不是数字");
                    }
                }

            }


            let $=new MyQuery();//实例化
            let BgSz=["./bg1.jpg","./bg2.jpg","./bg3.jpg","https://keepcodeing.github.io/InfectedZer-S/Img/bg4.jpg"];//存背景
            //初始化toggle位置
            function togglePos(i) {
                //获取样式方法写不出来，我暂且蒙在鼓里
                //无需设置top属性，只需设置bottom属性
                let height=document.getElementsByClassName("list");
                let t=document.getElementsByClassName("toggle");
                t[i].style.top=parseInt(getComputedStyle(height[i]).height)*0.7+"px";
            }
            //隐藏动画
            function toggleC(i){
                $.ClassQ("toggle",i).OnClick(function () {
                    $.ClassQ("toggle",i).Up(5,1);
                    $.ClassQ("dis_div",i).FadeIn(5,0.01);

                });
            }
            //显示动画
            function dis_divC(i){
                $.ClassQ("dis_div",i).OnClick(function () {
                    $.ClassQ("dis_div",i).Down(5,1);
                    $.ClassQ("toggle",i).FadeIn(5,0.11);
                });
            }
            //动态添加li和里面的内容
            function appen(info) {
                let box=$.ClassQ("message_list",0);
                let  child=document.createElement("li");
                let childspan1=document.createElement("span");
                let childspan2=document.createElement("span");
                let childspan3=document.createElement("span");
                let childspan4=document.createElement("span");
                let childdiv=document.createElement("div");
                let divbox=document.createElement("div");
                box=box["el"];
                child.setAttribute("class","list");
                child.appendChild(childspan1).setAttribute("class","msg");
                divbox.appendChild(childspan3).setAttribute("class","time");
                divbox.appendChild(childspan2).setAttribute("class","toggle");
                child.appendChild(childdiv).setAttribute("class","dis_div");
                childdiv.appendChild(childspan4);
                divbox.setAttribute("class","div_box");
                child.appendChild(divbox);

                childspan1.innerHtml=info.MyMsg;
                childspan2.innerText="Hide";
                childspan3.innerText=info.time;
                childspan4.innerText="一条被折叠，点击展开";
                box.appendChild(child);
            }
            appen({
                MyMsg:"2018年10月20日写出记录版页面",
                time:"2018.10.20 18:02 武汉"
            });
            appen({
                MyMsg:"没什么好写的，看看就行。原生JS任然不是很熟练...",
                time:"2018.10.20 18:07 武汉"
            });
            appen({
                MyMsg:"十月十九日U盘被摔成磁盘，所幸大部分数据已被恢复。毫无笋丝....",
                time:"2018.10.20 10:39 武汉"
            });
            appen({
                MyMsg:"今天也是好天气！一如既往的无聊和迷茫...唯一的目标是本科，当前的目标是前三。如果不付出相应的努力，这些都是空想...",
                time:"2018.10.26 14:30 武汉"
            });
            appen({
                MyMsg:"折腾了无数次的播放器还是活过来了，但U盘貌似无法识别60帧视频了...",
                time:"2018.10.26 14:33 武汉"
            });
            appen({
                MyMsg:"今天上午配眼镜，左眼100度+，右眼90度+。此为记录，我们明年再见！",
                time:"2018.10.27 19:08 武汉"
            });
            appen({
                MyMsg:"昨天搞了很长时间的float属性原来是不能从父元素继承的。例如给一个块级元素设置了float"+
                    ""+"属性其作用只会对次块级元素，而里面的子元素不受float的影响",
                time:"2018.10.28 10:38 武汉"
            });
            appen({
                MyMsg:"星期五购买FarCry3加DLC，花费118.12...DLC暂未发现时什么...均以星期五晚上解决无法收礼问题，星期六安装FarCry3。经过重新安装三次，"+
                    "均以权限不足失败..因为土豆糟糕的服务器，直到我重装系统前都以为只土豆的BUG...具体问题流程如下：收礼失败->启动提示没权限->重新安装3次->"+
                    "->不断百度方法->重装系统->能启动但闪退->显卡驱动有问题->打算安装旧版本驱动但回想起安装新驱动未生效->重启电脑->解决问题...第一次因为"+
                    "游戏花这么长时间...其他:IG战队于2018.11.4以3:0击败FNC夺到了LOL世界冠军",
                time:"2018.11.5 17:20 武汉>学校"
            });
            appen({
               MyMsg:"终于把记录页功能全部完善了，呜哇，累死我啦...写网页什么的都不想搞了啦...具体完善了消息过长导致"+
                   "span、li等标签出现布局错误...你是一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个"+"" +
                   "一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个"+"" +
                   "一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个"+"" +
                   "一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个"+"" +
                   "一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个"+"" +
                   "一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个一个"+"" +
                   "....消息再长也不会出现布局错误的元素啊（虚心）",
               time:"2018 11.11 12:57 武汉"

            });
            appen({
                MyMsg:"星期天晚上下单的桌子，到现在还没寄过来，速度为什么这么慢我暂且蒙在鼓里...",
                time:"2018.11.16 19:19 武汉"
            });
            appen({
                MyMsg:"月考一瞬从第一陨落成第六，语文原地踏步，数学原地踏步，英语开倒车，C语言开倒车，数据库原地踏步，计基稍有进步",
                time:"2018.11.24 14:34 武汉"
            });
            appen({
                MyMsg:"新增一个爱好：做图。图板页面也在今天完成，比想象中简单，但还需优化。目前已经独立制作了三张图片，耗时也从一开始的接近5小时到现在的只需2小时.."
                +"不知道这个新爱好会何去何从，设定是编程，本命是设计？...",
                time:"2018.12.1 18:17 武汉"
            });
            appen({
                MyMsg:"用心做出了一张UDK，感觉很好。注入灵魂的图片...但还有待提升...",
                time:"2018.12.10 18:35 武汉>学校"
            });
            appen({
                MyMsg:"做了张Hnsalc，眼睛等细节还需要调整...已将UDK投稿至N站与P站，目前P站再生80+，N站再生接近500并且目前呈现出稳定增长的趋势，评论很有意思w...",
                time:"2018.12.17 17:58 武汉>学校"
            });
            appen({
                MyMsg:"明天事第三次月考，so don't stop me now！",
                time:"2018.12.17 17:57 武汉>学校"
            })
            appen({
                MyMsg:"月考一如既往开倒车，数学倒车，数据库倒车，C语言没有进步，英语没有进步，语文原地踏步，总分历史最低...投稿至N站的最新两作也再生惨淡..."
                +"坏时代，来临了！",
                time:"2018.12.24 17:20 武汉>学校"
            })
            appen({
                MyMsg:"EXK长线彻底陨落，6月14日至12月25R.I.P"+"</br>"+"购买了新的线，390元，希望以此为动力（月考第九）...好时代，来临吧！",
                time:"2018.12.26 13:42 武汉>学校"
            })
            //设置li的JS
            function AllSet(){
                let max=document.getElementsByClassName("list").length;
                for(let i=0;i<max;i++){
                    dis_divC(i);
                    toggleC(i);
                    // togglePos(i);
                }
            }
            //设置背景图片
            function SetBackGround(info){
                $.GetTag(info.el).SetBackG({
                    MyUrl:"url("+info.url+")",
                    MyStyle:info.MyStyle
                });
            }
            SetBackGround({
                el:"body",
                url:BgSz[3],
                MyStyle:"cover"
            });
            //定时切换背景图片
            function SwitchBg(speed){
                let i=1;
                let max=BgSz.length;
                let timer=setInterval(()=>{
                    if(i>=max){
                        i=0;
                    }else{
                        SetBackGround({
                            el:"body",
                            url:BgSz[i],
                            MyStyle:"cover"
                        });
                        i++;
                    }
                },speed);
            }
            //设置所有li的JS代码
            AllSet();
            //切换图片
            // SwitchBg(5000);
        }
    </script>
</head>
<body>
<div class="banner">
    <span class="banner_text"><a style="text-decoration: none;" href="https://keepcodeing.github.io/InfectedZer-S/">It's not pain,it's just uncertainty，
        I konw my heart's missing a piece，but it still beats.</a></span>
</div>
<ul class="message_list">
</ul>
</body>
</html>
